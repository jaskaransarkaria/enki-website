import{S as k,i as T,s as N,e as J,t as U,k as F,w as _,c as q,a as z,h as G,d as y,m as b,x as p,b as R,g as S,J as M,y as I,q as m,o as w,B as C,l as v,n as V,p as B,v as X}from"../../../chunks/vendor-c3b201db.js";import{r as Z,b as j,c as O}from"../../../chunks/requests-6d92fbb7.js";import{B as x}from"../../../chunks/Breadcrumbs-a479d9e4.js";import{H as A}from"../../../chunks/HexGrid-07bb2e0b.js";import{P as ee}from"../../../chunks/ProductView-e1edb6fa.js";import"../../../chunks/navigation-0e6511d1.js";import"../../../chunks/gridCalc-cc30539c.js";import"../../../chunks/env-859c48a7.js";import"../../../chunks/SingleProduct-efdba4a2.js";import"../../../chunks/basket-56c39c3e.js";import"../../../chunks/basket-e649ff40.js";import"../../../chunks/singletons-d1fb5791.js";function te(a){let e,n,t,r,o,i,s,c,u,d;return r=new A({props:{data:a[2],categoryFn:a[0],showFullPage:!1}}),u=new A({props:{data:a[1],categoryFn:a[0]}}),{c(){e=J("h1"),n=U("Shop by type"),t=F(),_(r.$$.fragment),o=F(),i=J("h1"),s=U("Shop by artist"),c=F(),_(u.$$.fragment),this.h()},l(l){e=q(l,"H1",{class:!0});var g=z(e);n=G(g,"Shop by type"),g.forEach(y),t=b(l),p(r.$$.fragment,l),o=b(l),i=q(l,"H1",{class:!0});var f=z(i);s=G(f,"Shop by artist"),f.forEach(y),c=b(l),p(u.$$.fragment,l),this.h()},h(){R(e,"class","svelte-17zay9f"),R(i,"class","svelte-17zay9f")},m(l,g){S(l,e,g),M(e,n),S(l,t,g),I(r,l,g),S(l,o,g),S(l,i,g),M(i,s),S(l,c,g),I(u,l,g),d=!0},p(l,[g]){const f={};g&4&&(f.data=l[2]),g&1&&(f.categoryFn=l[0]),r.$set(f);const h={};g&2&&(h.data=l[1]),g&1&&(h.categoryFn=l[0]),u.$set(h)},i(l){d||(m(r.$$.fragment,l),m(u.$$.fragment,l),d=!0)},o(l){w(r.$$.fragment,l),w(u.$$.fragment,l),d=!1},d(l){l&&y(e),l&&y(t),C(r,l),l&&y(o),l&&y(i),l&&y(c),C(u,l)}}}function re(a,e,n){let t,r,{data:o=[]}=e,{categoryFn:i}=e;return a.$$set=s=>{"data"in s&&n(3,o=s.data),"categoryFn"in s&&n(0,i=s.categoryFn)},a.$$.update=()=>{a.$$.dirty&8&&n(2,t=o.filter(s=>s.Name.toLowerCase()==="fine jewellery"||s.Name.toLowerCase()==="costume jewellery")),a.$$.dirty&8&&n(1,r=o.filter(s=>s.Name.toLowerCase()!=="fine jewellery"&&s.Name.toLowerCase()!=="costume jewellery"))},[i,r,t,o]}class ne extends k{constructor(e){super();T(this,e,re,te,N,{data:3,categoryFn:0})}}function Y(a){let e,n;return e=new ee({props:{productArr:a[4],showDetailedView:a[2],variantCategories:a[1],showSwitch:a[3]}}),{c(){_(e.$$.fragment)},l(t){p(e.$$.fragment,t)},m(t,r){I(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.productArr=t[4]),r&4&&(o.showDetailedView=t[2]),r&2&&(o.variantCategories=t[1]),r&8&&(o.showSwitch=t[3]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){C(e,t)}}}function ae(a){var r,o;let e,n,t=a[0]&&(a[4].length&&!((o=(r=a[5])==null?void 0:r[a[0]])!=null&&o.isEmpty)||a[1].length)&&Y(a);return{c(){t&&t.c(),e=v()},l(i){t&&t.l(i),e=v()},m(i,s){t&&t.m(i,s),S(i,e,s),n=!0},p(i,[s]){var c,u;i[0]&&(i[4].length&&!((u=(c=i[5])==null?void 0:c[i[0]])!=null&&u.isEmpty)||i[1].length)?t?(t.p(i,s),s&51&&m(t,1)):(t=Y(i),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(V(),w(t,1,1,()=>{t=null}),B())},i(i){n||(m(t),n=!0)},o(i){w(t),n=!1},d(i){t&&t.d(i),i&&y(e)}}}function ie(a,e,n){let{categoryId:t}=e,{variantCategories:r=[]}=e,{showDetailedView:o=!1}=e,{showSwitch:i=!0}=e,s=[];const c={},u=async l=>{if(l){const g=await Z(`http://localhost:8080/products-by-category?id=${l.toString()}`);return n(4,s=g),g}return[]},d=async(l,g)=>{var f;if(!((f=c==null?void 0:c[g])!=null&&f.isEmpty)&&!l.find(h=>h.CategoryId===t)&&(l=await u(g),!l.length)){n(5,c[g]={isEmpty:!0},c);return}};return a.$$set=l=>{"categoryId"in l&&n(0,t=l.categoryId),"variantCategories"in l&&n(1,r=l.variantCategories),"showDetailedView"in l&&n(2,o=l.showDetailedView),"showSwitch"in l&&n(3,i=l.showSwitch)},a.$$.update=()=>{a.$$.dirty&17&&d(s,t)},[t,r,o,i,s,c]}class oe extends k{constructor(e){super();T(this,e,ie,ae,N,{categoryId:0,variantCategories:1,showDetailedView:2,showSwitch:3})}}function se(a){let e,n;return e=new A({props:{data:[...a[0],...a[1]],categoryFn:a[2]}}),{c(){_(e.$$.fragment)},l(t){p(e.$$.fragment,t)},m(t,r){I(e,t,r),n=!0},p(t,[r]){const o={};r&3&&(o.data=[...t[0],...t[1]]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){C(e,t)}}}function fe(a,e,n){let t,{data:r=[]}=e,{categoryId:o}=e,{categoryFn:i}=e,{prefix:s=""}=e,c=[];X(async()=>{await g()});const u=f=>{if(d(f))return i(f);if(l(f))return`/shop/tag/${f.Name.toLowerCase()}?catid=${o}&tagid=${f.Id}`},d=f=>"Children"in f,l=f=>"TagTypeId"in f,g=async()=>{n(6,c=await j("http://localhost:8080/tags"))};return a.$$set=f=>{"data"in f&&n(0,r=f.data),"categoryId"in f&&n(3,o=f.categoryId),"categoryFn"in f&&n(4,i=f.categoryFn),"prefix"in f&&n(5,s=f.prefix)},a.$$.update=()=>{a.$$.dirty&96&&n(1,t=c.filter(f=>!f.Name.includes("SOR ")).filter(f=>f.Name.includes(s)))},[r,t,u,o,i,s,c]}class le extends k{constructor(e){super();T(this,e,fe,se,N,{data:0,categoryId:3,categoryFn:4,prefix:5})}}function K(a){var t;let e,n;return e=new x({props:{selectedCategoryId:(t=a[3])==null?void 0:t.Id}}),{c(){_(e.$$.fragment)},l(r){p(e.$$.fragment,r)},m(r,o){I(e,r,o),n=!0},p(r,o){var s;const i={};o&8&&(i.selectedCategoryId=(s=r[3])==null?void 0:s.Id),e.$set(i)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){w(e.$$.fragment,r),n=!1},d(r){C(e,r)}}}function Q(a){let e,n,t,r;const o=[ge,ue,ce],i=[];function s(c,u){return c[3].Id===1875996?0:c[3].Id===1875997||c[3].Id===1875998?1:2}return e=s(a),n=i[e]=o[e](a),{c(){n.c(),t=v()},l(c){n.l(c),t=v()},m(c,u){i[e].m(c,u),S(c,t,u),r=!0},p(c,u){let d=e;e=s(c),e===d?i[e].p(c,u):(V(),w(i[d],1,1,()=>{i[d]=null}),B(),n=i[e],n?n.p(c,u):(n=i[e]=o[e](c),n.c()),m(n,1),n.m(t.parentNode,t))},i(c){r||(m(n),r=!0)},o(c){w(n),r=!1},d(c){i[e].d(c),c&&y(t)}}}function ce(a){let e,n;return e=new A({props:{data:a[5](a[3].Children),categoryFn:a[0]}}),{c(){_(e.$$.fragment)},l(t){p(e.$$.fragment,t)},m(t,r){I(e,t,r),n=!0},p(t,r){const o={};r&8&&(o.data=t[5](t[3].Children)),r&1&&(o.categoryFn=t[0]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){C(e,t)}}}function ue(a){var t;let e,n;return e=new le({props:{data:a[5](a[3].Children),categoryFn:a[0],categoryId:(t=a[3])==null?void 0:t.Id,prefix:a[3].Name.split(" ")[0].toUpperCase()}}),{c(){_(e.$$.fragment)},l(r){p(e.$$.fragment,r)},m(r,o){I(e,r,o),n=!0},p(r,o){var s;const i={};o&8&&(i.data=r[5](r[3].Children)),o&1&&(i.categoryFn=r[0]),o&8&&(i.categoryId=(s=r[3])==null?void 0:s.Id),o&8&&(i.prefix=r[3].Name.split(" ")[0].toUpperCase()),e.$set(i)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){w(e.$$.fragment,r),n=!1},d(r){C(e,r)}}}function ge(a){var t;let e,n;return e=new ne({props:{data:a[5]((t=a[3])==null?void 0:t.Children),categoryFn:a[0]}}),{c(){_(e.$$.fragment)},l(r){p(e.$$.fragment,r)},m(r,o){I(e,r,o),n=!0},p(r,o){var s;const i={};o&8&&(i.data=r[5]((s=r[3])==null?void 0:s.Children)),o&1&&(i.categoryFn=r[0]),e.$set(i)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){w(e.$$.fragment,r),n=!1},d(r){C(e,r)}}}function me(a){var c,u,d,l,g;let e,n=((u=a[5]((c=a[3])==null?void 0:c.Children))==null?void 0:u.length)||((d=a[3])==null?void 0:d.Id)===1875997||((l=a[3])==null?void 0:l.Id)===1875998,t,r,o,i=a[1]&&K(a),s=n&&Q(a);return r=new oe({props:{categoryId:(g=a[3])==null?void 0:g.Id,variantCategories:a[4],showSwitch:a[2]}}),{c(){i&&i.c(),e=F(),s&&s.c(),t=F(),_(r.$$.fragment)},l(f){i&&i.l(f),e=b(f),s&&s.l(f),t=b(f),p(r.$$.fragment,f)},m(f,h){i&&i.m(f,h),S(f,e,h),s&&s.m(f,h),S(f,t,h),I(r,f,h),o=!0},p(f,[h]){var D,E,P,L,H;f[1]?i?(i.p(f,h),h&2&&m(i,1)):(i=K(f),i.c(),m(i,1),i.m(e.parentNode,e)):i&&(V(),w(i,1,1,()=>{i=null}),B()),h&8&&(n=((E=f[5]((D=f[3])==null?void 0:D.Children))==null?void 0:E.length)||((P=f[3])==null?void 0:P.Id)===1875997||((L=f[3])==null?void 0:L.Id)===1875998),n?s?(s.p(f,h),h&8&&m(s,1)):(s=Q(f),s.c(),m(s,1),s.m(t.parentNode,t)):s&&(V(),w(s,1,1,()=>{s=null}),B());const $={};h&8&&($.categoryId=(H=f[3])==null?void 0:H.Id),h&16&&($.variantCategories=f[4]),h&4&&($.showSwitch=f[2]),r.$set($)},i(f){o||(m(i),m(s),m(r.$$.fragment,f),o=!0)},o(f){w(i),w(s),w(r.$$.fragment,f),o=!1},d(f){i&&i.d(f),f&&y(e),s&&s.d(f),f&&y(t),C(r,f)}}}function he(a,e,n){let t,{categoryFn:r}=e,{showBreadcrumbs:o=!0}=e,{showSwitch:i=!0}=e,{categoryToShow:s}=e;const c=u=>u==null?void 0:u.filter(d=>d.NominalCode==="CATEGORY");return a.$$set=u=>{"categoryFn"in u&&n(0,r=u.categoryFn),"showBreadcrumbs"in u&&n(1,o=u.showBreadcrumbs),"showSwitch"in u&&n(2,i=u.showSwitch),"categoryToShow"in u&&n(3,s=u.categoryToShow)},a.$$.update=()=>{a.$$.dirty&8&&n(4,t=s==null?void 0:s.Children.filter(u=>u.NominalCode===null))},[r,o,i,s,t,c]}class we extends k{constructor(e){super();T(this,e,he,me,N,{categoryFn:0,showBreadcrumbs:1,showSwitch:2,categoryToShow:3})}}function de(a){let e,n;return e=new we({props:{categoryFn:a[1],categoryToShow:a[0]}}),{c(){_(e.$$.fragment)},l(t){p(e.$$.fragment,t)},m(t,r){I(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.categoryToShow=t[0]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){C(e,t)}}}const W=(a,e)=>{if((e==null?void 0:e.Id)===a)return e;if(e!=null&&e.Children)for(const n of e.Children){if(n.Id===a)return n;if(n.Children){const t=W(a,n);if(t)return t}}else return};async function Ve({fetch:a,params:e,url:n}){const t=await O(`http://localhost:8080/category?id=${e.category}`,a);return{props:{categoryToShow:W(parseInt(e.category,10),t[0])}}}const Be=!0;function ye(a,e,n){let{categoryToShow:t}=e;const r=o=>`/shop/category/${o.Id}`;return a.$$set=o=>{"categoryToShow"in o&&n(0,t=o.categoryToShow)},[t,r]}class Ae extends k{constructor(e){super();T(this,e,ye,de,N,{categoryToShow:0})}}export{Ae as default,Ve as load,Be as prerender};
