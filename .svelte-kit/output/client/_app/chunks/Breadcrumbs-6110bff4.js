import{S as P,i as q,s as w,l as g,g as k,a7 as G,aa as O,d as b,H as C,R as T,v as E,e as v,k as I,t as H,c as N,a as J,m as S,h as R,O as z,b as h,J as p,G as A,j as D}from"./vendor-301d67fd.js";import{g as B}from"./navigation-0e6511d1.js";import{d as F}from"./requests-1ffbd347.js";import{r as x}from"./categories-636cc078.js";function U(o,a,e){const t=o.slice();return t[8]=a[e],t}function j(o){let a=[],e=new Map,t,n=o[1];const u=s=>s[8].Id;for(let s=0;s<n.length;s+=1){let l=U(o,n,s),i=u(l);e.set(i,a[s]=M(i,l))}return{c(){for(let s=0;s<a.length;s+=1)a[s].c();t=g()},l(s){for(let l=0;l<a.length;l+=1)a[l].l(s);t=g()},m(s,l){for(let i=0;i<a.length;i+=1)a[i].m(s,l);k(s,t,l)},p(s,l){l&6&&(n=s[1],a=G(a,l,u,1,s,n,e,t.parentNode,O,M,t,U))},d(s){for(let l=0;l<a.length;l+=1)a[l].d(s);s&&b(t)}}}function M(o,a){let e,t,n,u,s=a[8].Name+"",l,i,_,d;function r(){return a[5](a[8])}return{key:o,first:null,c(){e=v("button"),t=v("img"),u=I(),l=H(s),i=I(),this.h()},l(f){e=N(f,"BUTTON",{class:!0});var c=J(e);t=N(c,"IMG",{src:!0,alt:!0,class:!0}),u=S(c),l=R(c,s),i=S(c),c.forEach(b),this.h()},h(){z(t.src,n="https://enki.imgix.net/empty_hex_1.png?auto=format,compress")||h(t,"src",n),h(t,"alt","breadcrumb icon"),h(t,"class","svelte-ufmvj1"),h(e,"class","svelte-ufmvj1"),this.first=e},m(f,c){k(f,e,c),p(e,t),p(e,u),p(e,l),p(e,i),_||(d=A(e,"click",r),_=!0)},p(f,c){a=f,c&2&&s!==(s=a[8].Name+"")&&D(l,s)},d(f){f&&b(e),_=!1,d()}}}function K(o){let a,e=o[0]&&j(o);return{c(){e&&e.c(),a=g()},l(t){e&&e.l(t),a=g()},m(t,n){e&&e.m(t,n),k(t,a,n)},p(t,[n]){t[0]?e?e.p(t,n):(e=j(t),e.c(),e.m(a.parentNode,a)):e&&(e.d(1),e=null)},i:C,o:C,d(t){e&&e.d(t),t&&b(a)}}}function L(o,a,e){let t;T(o,x,r=>e(4,t=r));let{extraCrumbs:n=[]}=a,{selectedCategoryId:u}=a,s;const l={Id:0,Name:"Shop",ParentId:0,Children:[],NominalCode:""};E(async()=>{if(!(t!=null&&t.length)){const r=await F("http://localhost:8080/categories");x.set([...r])}});const i=(r,f,c)=>{var y;for(const m of f){if(m.Id===r)return m.ParentId===null?[...c,m]:i(m.ParentId,t,[...c,m]);(y=m==null?void 0:m.Children)!=null&&y.length&&(c=i(r,m.Children,c))}return c},_=r=>{const f="tagUrl"in r?`${r.tagUrl}${r.params}`:`/shop/category/${r.Id}`;r.Name==="Shop"?B("/shop"):B(f)},d=r=>_(r);return o.$$set=r=>{"extraCrumbs"in r&&e(3,n=r.extraCrumbs),"selectedCategoryId"in r&&e(0,u=r.selectedCategoryId)},o.$$.update=()=>{o.$$.dirty&25&&e(1,s=[l,...i(u,t,[]).slice().reverse(),...n])},[u,s,_,n,t,d]}class Y extends P{constructor(a){super();q(this,a,L,K,w,{extraCrumbs:3,selectedCategoryId:0})}}export{Y as B};
